'use strict'

function clearCache (id) {
  id = id || __filename
  const path = require.resolve(id)

  if (require.cache[ path ] && require.cache[ path ].children) {
    require.cache[ path ].children.forEach((child) => clearCache(child.id))
  }
  return delete require.cache[ path ]
}

function load (config) {
  clearCache()

  Object.assign(module.exports, config)

  module.exports.load = load
  return config
}

module.exports.load = load
